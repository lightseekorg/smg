<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 650 380">
  <defs>
    <linearGradient id="hc-primaryGrad" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#6366f1"/>
      <stop offset="100%" style="stop-color:#8b5cf6"/>
    </linearGradient>
    <linearGradient id="hc-greenGrad" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#10b981"/>
      <stop offset="100%" style="stop-color:#34d399"/>
    </linearGradient>
    <linearGradient id="hc-redGrad" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#ef4444"/>
      <stop offset="100%" style="stop-color:#f87171"/>
    </linearGradient>
    <linearGradient id="hc-bgGrad" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#0f172a"/>
      <stop offset="100%" style="stop-color:#1e293b"/>
    </linearGradient>
    <filter id="hc-softGlow">
      <feGaussianBlur stdDeviation="6" result="blur"/>
      <feMerge><feMergeNode in="blur"/><feMergeNode in="SourceGraphic"/></feMerge>
    </filter>
    <pattern id="hc-grid" width="40" height="40" patternUnits="userSpaceOnUse">
      <path d="M 40 0 L 0 0 0 40" fill="none" stroke="#334155" stroke-width="0.5" opacity="0.3"/>
    </pattern>
  </defs>

  <style>
    .hc-label { font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif; font-weight: 600; }
    .hc-sublabel { font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif; font-weight: 500; }
    .hc-msg { font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif; font-size: 9px; font-weight: 500; }
    .hc-note { font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif; font-size: 8px; }
    @keyframes hc-pulse { 0%, 100% { opacity: 1; } 50% { opacity: 0.5; } }
    .hc-pulse { animation: hc-pulse 2s ease-in-out infinite; }
  </style>

  <!-- Background -->
  <rect width="650" height="380" rx="16" fill="url(#hc-bgGrad)"/>
  <rect width="650" height="380" fill="url(#hc-grid)" rx="16"/>

  <!-- Title -->
  <text x="325" y="28" text-anchor="middle" class="hc-label" font-size="14" fill="#e2e8f0">Health Check Workflow</text>

  <!-- Participant boxes -->
  <rect x="120" y="42" width="80" height="28" rx="8" fill="url(#hc-primaryGrad)"/>
  <text x="160" y="61" text-anchor="middle" class="hc-label" font-size="10" fill="white">SMG</text>

  <rect x="330" y="42" width="90" height="28" rx="8" fill="url(#hc-greenGrad)"/>
  <text x="375" y="61" text-anchor="middle" class="hc-label" font-size="10" fill="white">Worker 1</text>

  <rect x="510" y="42" width="90" height="28" rx="8" fill="url(#hc-redGrad)"/>
  <text x="555" y="61" text-anchor="middle" class="hc-label" font-size="10" fill="white">Worker 2</text>

  <!-- Lifelines -->
  <line x1="160" y1="70" x2="160" y2="350" stroke="#8b5cf6" stroke-width="1.5" stroke-dasharray="4,4" opacity="0.4"/>
  <line x1="375" y1="70" x2="375" y2="350" stroke="#34d399" stroke-width="1.5" stroke-dasharray="4,4" opacity="0.4"/>
  <line x1="555" y1="70" x2="555" y2="350" stroke="#f87171" stroke-width="1.5" stroke-dasharray="4,4" opacity="0.4"/>

  <!-- Interval note -->
  <rect x="70" y="82" width="110" height="18" rx="4" fill="#6366f1" opacity="0.15" stroke="#6366f1" stroke-width="1"/>
  <text x="125" y="94" text-anchor="middle" class="hc-note" fill="#a78bfa">Health check interval</text>

  <!-- SMG → Worker 1: GET /health -->
  <line x1="160" y1="110" x2="370" y2="110" stroke="#34d399" stroke-width="1.5"/>
  <polygon points="367,106 375,110 367,114" fill="#34d399"/>
  <text x="265" y="104" text-anchor="middle" class="hc-msg" fill="#34d399">GET /health</text>

  <!-- Worker 1 → SMG: 200 OK -->
  <line x1="375" y1="128" x2="165" y2="128" stroke="#34d399" stroke-width="1.5" stroke-dasharray="5,3"/>
  <polygon points="168,124 160,128 168,132" fill="#34d399"/>
  <text x="265" y="124" text-anchor="middle" class="hc-msg" fill="#34d399">200 OK</text>

  <!-- Note: Healthy -->
  <rect x="350" y="135" width="55" height="16" rx="4" fill="#10b981" opacity="0.2" stroke="#10b981" stroke-width="1"/>
  <text x="377" y="147" text-anchor="middle" class="hc-note" fill="#34d399">Healthy</text>

  <!-- SMG → Worker 2: GET /health (Timeout) -->
  <line x1="160" y1="165" x2="550" y2="165" stroke="#f87171" stroke-width="1.5"/>
  <polygon points="547,161 555,165 547,169" fill="#f87171"/>
  <text x="355" y="159" text-anchor="middle" class="hc-msg" fill="#f87171">GET /health</text>

  <!-- Worker 2 timeout (X mark) -->
  <line x1="548" y1="178" x2="562" y2="192" stroke="#ef4444" stroke-width="2.5"/>
  <line x1="562" y1="178" x2="548" y2="192" stroke="#ef4444" stroke-width="2.5"/>
  <text x="590" y="189" class="hc-msg" fill="#f87171">Timeout</text>

  <!-- Note: Failure 1 -->
  <rect x="525" y="197" width="62" height="16" rx="4" fill="#ef4444" opacity="0.2" stroke="#ef4444" stroke-width="1"/>
  <text x="556" y="209" text-anchor="middle" class="hc-note" fill="#f87171">Failure 1</text>

  <!-- Next interval -->
  <rect x="70" y="220" width="110" height="18" rx="4" fill="#6366f1" opacity="0.15" stroke="#6366f1" stroke-width="1"/>
  <text x="125" y="232" text-anchor="middle" class="hc-note" fill="#a78bfa">Next interval</text>

  <!-- SMG → Worker 2: GET /health (Timeout again) -->
  <line x1="160" y1="248" x2="550" y2="248" stroke="#f87171" stroke-width="1.5"/>
  <polygon points="547,244 555,248 547,252" fill="#f87171"/>
  <text x="355" y="242" text-anchor="middle" class="hc-msg" fill="#f87171">GET /health</text>

  <line x1="548" y1="258" x2="562" y2="272" stroke="#ef4444" stroke-width="2.5"/>
  <line x1="562" y1="258" x2="548" y2="272" stroke="#ef4444" stroke-width="2.5"/>

  <!-- Note: Failure 3 - Mark UNHEALTHY -->
  <rect x="493" y="278" width="118" height="18" rx="4" fill="#ef4444" opacity="0.3" stroke="#ef4444" stroke-width="1.5"/>
  <text x="552" y="290" text-anchor="middle" class="hc-note" fill="#f87171" font-weight="600">Failure 3 — UNHEALTHY</text>

  <!-- Note: Worker removed from pool -->
  <rect x="60" y="305" width="170" height="18" rx="4" fill="#ef4444" opacity="0.15" stroke="#ef4444" stroke-width="1"/>
  <text x="145" y="317" text-anchor="middle" class="hc-note" fill="#f87171">Worker 2 removed from pool</text>

  <!-- X on Worker 2 lifeline -->
  <line x1="545" y1="310" x2="565" y2="330" stroke="#ef4444" stroke-width="3"/>
  <line x1="565" y1="310" x2="545" y2="330" stroke="#ef4444" stroke-width="3"/>

  <!-- Bottom tagline -->
  <text x="325" y="368" text-anchor="middle" class="hc-sublabel" font-size="11" fill="#64748b">Periodic Monitoring  •  Consecutive Failure Detection  •  Automatic Pool Management</text>
</svg>
