<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1400 900">
  <defs>
    <linearGradient id="bgGrad" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#0f172a"/>
      <stop offset="100%" style="stop-color:#1e293b"/>
    </linearGradient>
    <linearGradient id="blueGrad" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#3b82f6"/>
      <stop offset="100%" style="stop-color:#60a5fa"/>
    </linearGradient>
    <linearGradient id="greenGrad" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#10b981"/>
      <stop offset="100%" style="stop-color:#34d399"/>
    </linearGradient>
    <linearGradient id="purpleGrad" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#8b5cf6"/>
      <stop offset="100%" style="stop-color:#a78bfa"/>
    </linearGradient>
    <linearGradient id="amberGrad" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#f59e0b"/>
      <stop offset="100%" style="stop-color:#fbbf24"/>
    </linearGradient>
    <linearGradient id="pinkGrad" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#ec4899"/>
      <stop offset="100%" style="stop-color:#f472b6"/>
    </linearGradient>
    <linearGradient id="redGrad" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#ef4444"/>
      <stop offset="100%" style="stop-color:#f87171"/>
    </linearGradient>
    <linearGradient id="cyanGrad" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#06b6d4"/>
      <stop offset="100%" style="stop-color:#22d3ee"/>
    </linearGradient>
    <marker id="arrow" markerWidth="8" markerHeight="8" refX="7" refY="4" orient="auto">
      <path d="M0,0 L8,4 L0,8 Z" fill="#64748b"/>
    </marker>
    <marker id="arrowBlue" markerWidth="8" markerHeight="8" refX="7" refY="4" orient="auto">
      <path d="M0,0 L8,4 L0,8 Z" fill="#3b82f6"/>
    </marker>
    <marker id="arrowAmber" markerWidth="8" markerHeight="8" refX="7" refY="4" orient="auto">
      <path d="M0,0 L8,4 L0,8 Z" fill="#f59e0b"/>
    </marker>
    <marker id="arrowRed" markerWidth="8" markerHeight="8" refX="7" refY="4" orient="auto">
      <path d="M0,0 L8,4 L0,8 Z" fill="#ef4444"/>
    </marker>
    <marker id="arrowGreen" markerWidth="8" markerHeight="8" refX="7" refY="4" orient="auto">
      <path d="M0,0 L8,4 L0,8 Z" fill="#10b981"/>
    </marker>
  </defs>

  <style>
    .title { font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif; font-weight: 700; fill: #f1f5f9; }
    .label { font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif; font-weight: 600; fill: white; }
    .sublabel { font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif; font-weight: 500; fill: #e2e8f0; }
    .small { font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif; font-size: 10px; fill: #94a3b8; }
    .tiny { font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif; font-size: 9px; fill: #64748b; }
    .group-label { font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif; font-size: 11px; fill: #94a3b8; font-weight: 600; }
    .section-label { font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif; font-size: 10px; fill: #64748b; text-transform: uppercase; letter-spacing: 1px; }
  </style>

  <!-- Background -->
  <rect width="1400" height="900" fill="url(#bgGrad)"/>
  <pattern id="grid" width="25" height="25" patternUnits="userSpaceOnUse">
    <path d="M 25 0 L 0 0 0 25" fill="none" stroke="#334155" stroke-width="0.5" opacity="0.3"/>
  </pattern>
  <rect width="1400" height="900" fill="url(#grid)"/>

  <!-- Title -->
  <text x="700" y="30" text-anchor="middle" class="title" font-size="18">SMG Gateway Architecture</text>

  <!-- ==================== REGISTRIES SECTION ==================== -->
  <text x="420" y="60" text-anchor="middle" class="section-label">Registries &amp; State</text>
  <rect x="100" y="70" width="640" height="75" rx="10" fill="#1e293b" stroke="#3b82f6" stroke-width="1.5"/>

  <!-- Registry items -->
  <g>
    <rect x="115" y="85" width="100" height="48" rx="6" fill="#334155"/>
    <circle cx="130" cy="109" r="4" fill="#60a5fa"/>
    <text x="175" y="105" text-anchor="middle" class="sublabel" font-size="10">Model</text>
    <text x="175" y="120" text-anchor="middle" class="small">Registry</text>
  </g>
  <g>
    <rect x="225" y="85" width="100" height="48" rx="6" fill="#334155"/>
    <circle cx="240" cy="109" r="4" fill="#34d399"/>
    <text x="285" y="105" text-anchor="middle" class="sublabel" font-size="10">LB Policy</text>
    <text x="285" y="120" text-anchor="middle" class="small">Registry</text>
  </g>
  <g>
    <rect x="335" y="85" width="100" height="48" rx="6" fill="#334155"/>
    <circle cx="350" cy="109" r="4" fill="#a78bfa"/>
    <text x="395" y="105" text-anchor="middle" class="sublabel" font-size="10">Tokenizer</text>
    <text x="395" y="120" text-anchor="middle" class="small">Registry</text>
  </g>
  <g>
    <rect x="445" y="85" width="100" height="48" rx="6" fill="#334155"/>
    <circle cx="460" cy="109" r="4" fill="#fbbf24"/>
    <text x="505" y="105" text-anchor="middle" class="sublabel" font-size="10">Chat</text>
    <text x="505" y="120" text-anchor="middle" class="small">History</text>
  </g>
  <g>
    <rect x="555" y="85" width="100" height="48" rx="6" fill="#334155"/>
    <circle cx="570" cy="109" r="4" fill="#f472b6"/>
    <text x="615" y="105" text-anchor="middle" class="sublabel" font-size="10">WASM</text>
    <text x="615" y="120" text-anchor="middle" class="small">Plugins</text>
  </g>
  <g>
    <rect x="665" y="85" width="65" height="48" rx="6" fill="#334155"/>
    <circle cx="680" cy="109" r="4" fill="#22d3ee"/>
    <text x="705" y="109" text-anchor="middle" class="sublabel" font-size="10">MCP</text>
  </g>

  <!-- ==================== CLIENT ==================== -->
  <g>
    <rect x="20" y="280" width="70" height="140" rx="8" fill="#1e293b" stroke="#6366f1" stroke-width="2"/>
    <rect x="20" y="280" width="70" height="24" rx="8" fill="url(#purpleGrad)"/>
    <rect x="20" y="296" width="70" height="8" fill="url(#purpleGrad)"/>
    <text x="55" y="297" text-anchor="middle" class="label" font-size="10">Client</text>
    <text x="55" y="325" text-anchor="middle" class="small">Apps</text>
    <text x="55" y="340" text-anchor="middle" class="small">Agents</text>
    <text x="55" y="355" text-anchor="middle" class="small">Chat UIs</text>
    <text x="55" y="370" text-anchor="middle" class="small">Services</text>
  </g>

  <!-- ==================== API ENDPOINTS ==================== -->
  <g>
    <rect x="110" y="170" width="130" height="280" rx="10" fill="#1e293b" stroke="#f59e0b" stroke-width="2"/>
    <rect x="110" y="170" width="130" height="26" rx="10" fill="url(#amberGrad)"/>
    <rect x="110" y="188" width="130" height="8" fill="url(#amberGrad)"/>
    <text x="175" y="189" text-anchor="middle" class="label" font-size="11">API Endpoints</text>

    <text x="125" y="215" class="group-label" font-size="9">Inference</text>
    <line x1="125" y1="220" x2="220" y2="220" stroke="#475569" stroke-width="1"/>
    <text x="125" y="235" class="small">/v1/chat/completions</text>
    <text x="125" y="250" class="small">/v1/completions</text>
    <text x="125" y="265" class="small">/v1/responses</text>
    <text x="125" y="280" class="small">/v1/embeddings</text>
    <text x="125" y="295" class="small">/v1/rerank</text>
    <text x="125" y="310" class="small">/messages</text>

    <text x="125" y="335" class="group-label" font-size="9">Utility</text>
    <line x1="125" y1="340" x2="220" y2="340" stroke="#475569" stroke-width="1"/>
    <text x="125" y="355" class="small">/tokenize</text>
    <text x="125" y="370" class="small">/detokenize</text>
    <text x="125" y="385" class="small">/parser/tool</text>

    <text x="125" y="410" class="group-label" font-size="9">Admin</text>
    <line x1="125" y1="415" x2="220" y2="415" stroke="#475569" stroke-width="1"/>
    <text x="125" y="430" class="small">/workers | /wasm | /mcp</text>
  </g>

  <!-- ==================== MIDDLEWARE ==================== -->
  <g>
    <rect x="110" y="470" width="130" height="150" rx="10" fill="#1e293b" stroke="#10b981" stroke-width="2"/>
    <rect x="110" y="470" width="130" height="26" rx="10" fill="url(#greenGrad)"/>
    <rect x="110" y="488" width="130" height="8" fill="url(#greenGrad)"/>
    <text x="175" y="489" text-anchor="middle" class="label" font-size="11">Middleware</text>

    <text x="125" y="515" class="small">• Rate Limiting</text>
    <text x="125" y="532" class="small">• OIDC Auth</text>
    <text x="125" y="549" class="small">• WASM Plugins</text>
    <text x="125" y="566" class="small">• Metrics Collection</text>
    <text x="125" y="583" class="small">• OpenTelemetry</text>
    <text x="125" y="600" class="small">• Request ID</text>
  </g>

  <!-- ==================== ROUTER MANAGER ==================== -->
  <g>
    <rect x="270" y="370" width="90" height="55" rx="8" fill="#1e293b" stroke="#8b5cf6" stroke-width="2"/>
    <rect x="270" y="370" width="90" height="26" rx="8" fill="url(#purpleGrad)"/>
    <rect x="270" y="388" width="90" height="8" fill="url(#purpleGrad)"/>
    <text x="315" y="389" text-anchor="middle" class="label" font-size="10">Router</text>
    <text x="315" y="410" text-anchor="middle" class="small">Manager</text>
  </g>

  <!-- ==================== gRPC PATH ==================== -->
  <text x="770" y="170" text-anchor="middle" class="section-label">gRPC Path • Token-Level Streaming</text>
  <rect x="385" y="180" width="770" height="110" rx="10" fill="#1e293b" stroke="#3b82f6" stroke-width="1.5"/>

  <g>
    <rect x="400" y="200" width="70" height="45" rx="6" fill="#334155" stroke="#3b82f6" stroke-width="1"/>
    <text x="435" y="220" text-anchor="middle" class="sublabel" font-size="9">gRPC</text>
    <text x="435" y="233" text-anchor="middle" class="small">Router</text>
  </g>
  <g>
    <rect x="485" y="200" width="70" height="45" rx="6" fill="#334155" stroke="#10b981" stroke-width="1"/>
    <text x="520" y="220" text-anchor="middle" class="sublabel" font-size="9">XGrammar</text>
    <text x="520" y="233" text-anchor="middle" class="small">Generate</text>
  </g>
  <g>
    <rect x="570" y="200" width="70" height="45" rx="6" fill="#334155" stroke="#10b981" stroke-width="1"/>
    <text x="605" y="220" text-anchor="middle" class="sublabel" font-size="9">Chat</text>
    <text x="605" y="233" text-anchor="middle" class="small">Template</text>
  </g>
  <g>
    <rect x="655" y="200" width="70" height="45" rx="6" fill="#334155" stroke="#10b981" stroke-width="1"/>
    <text x="690" y="220" text-anchor="middle" class="sublabel" font-size="9">Tokenize</text>
    <text x="690" y="233" text-anchor="middle" class="small">+ Cache</text>
  </g>
  <g>
    <rect x="740" y="200" width="65" height="45" rx="6" fill="#334155" stroke="#f59e0b" stroke-width="1"/>
    <text x="772" y="220" text-anchor="middle" class="sublabel" font-size="9">Load</text>
    <text x="772" y="233" text-anchor="middle" class="small">Balance</text>
  </g>
  <g>
    <rect x="820" y="195" width="90" height="55" rx="6" fill="#334155" stroke="#8b5cf6" stroke-width="1.5"/>
    <text x="865" y="215" text-anchor="middle" class="sublabel" font-size="9">gRPC Backend</text>
    <text x="865" y="230" text-anchor="middle" class="tiny">SGLang • vLLM</text>
    <text x="865" y="242" text-anchor="middle" class="tiny">TensorRT-LLM</text>
  </g>
  <g>
    <rect x="925" y="200" width="70" height="45" rx="6" fill="#334155" stroke="#10b981" stroke-width="1"/>
    <text x="960" y="220" text-anchor="middle" class="sublabel" font-size="9">Detokenize</text>
    <text x="960" y="233" text-anchor="middle" class="small">Stream</text>
  </g>
  <g>
    <rect x="1010" y="200" width="70" height="45" rx="6" fill="#334155" stroke="#10b981" stroke-width="1"/>
    <text x="1045" y="220" text-anchor="middle" class="sublabel" font-size="9">Reasoning</text>
    <text x="1045" y="233" text-anchor="middle" class="small">Parser</text>
  </g>
  <g>
    <rect x="1095" y="200" width="50" height="45" rx="6" fill="#334155" stroke="#10b981" stroke-width="1"/>
    <text x="1120" y="220" text-anchor="middle" class="sublabel" font-size="9">Tool</text>
    <text x="1120" y="233" text-anchor="middle" class="small">Parser</text>
  </g>

  <!-- gRPC arrows -->
  <path d="M470 222 L485 222" stroke="#475569" stroke-width="1.5" fill="none"/>
  <path d="M555 222 L570 222" stroke="#475569" stroke-width="1.5" fill="none"/>
  <path d="M640 222 L655 222" stroke="#475569" stroke-width="1.5" fill="none"/>
  <path d="M725 222 L740 222" stroke="#475569" stroke-width="1.5" fill="none"/>
  <path d="M805 222 L820 222" stroke="#475569" stroke-width="1.5" fill="none"/>
  <path d="M910 222 L925 222" stroke="#475569" stroke-width="1.5" fill="none"/>
  <path d="M995 222 L1010 222" stroke="#475569" stroke-width="1.5" fill="none"/>
  <path d="M1080 222 L1095 222" stroke="#475569" stroke-width="1.5" fill="none"/>

  <!-- ==================== HTTP PATH ==================== -->
  <text x="650" y="310" text-anchor="middle" class="section-label">HTTP Path • OpenAI Compatible</text>
  <rect x="385" y="320" width="530" height="115" rx="10" fill="#1e293b" stroke="#f59e0b" stroke-width="1.5"/>

  <g>
    <rect x="400" y="345" width="70" height="45" rx="6" fill="#334155" stroke="#f59e0b" stroke-width="1"/>
    <text x="435" y="365" text-anchor="middle" class="sublabel" font-size="9">HTTP</text>
    <text x="435" y="378" text-anchor="middle" class="small">Router</text>
  </g>
  <g>
    <rect x="490" y="335" width="80" height="30" rx="6" fill="#334155" stroke="#10b981" stroke-width="1"/>
    <text x="530" y="355" text-anchor="middle" class="small">Regular HTTP</text>
  </g>
  <g>
    <rect x="490" y="375" width="80" height="35" rx="6" fill="#334155" stroke="#10b981" stroke-width="1"/>
    <text x="530" y="390" text-anchor="middle" class="sublabel" font-size="9">PD Mode</text>
    <text x="530" y="403" text-anchor="middle" class="tiny">Prefill-Decode</text>
  </g>
  <g>
    <rect x="590" y="345" width="65" height="45" rx="6" fill="#334155" stroke="#f59e0b" stroke-width="1"/>
    <text x="622" y="365" text-anchor="middle" class="sublabel" font-size="9">Load</text>
    <text x="622" y="378" text-anchor="middle" class="small">Balance</text>
  </g>
  <g>
    <rect x="675" y="335" width="65" height="30" rx="6" fill="#334155" stroke="#f59e0b" stroke-width="1"/>
    <text x="707" y="355" text-anchor="middle" class="small">Find P/D</text>
  </g>
  <g>
    <rect x="675" y="375" width="65" height="35" rx="6" fill="#334155" stroke="#10b981" stroke-width="1"/>
    <text x="707" y="390" text-anchor="middle" class="sublabel" font-size="9">Mutate</text>
    <text x="707" y="403" text-anchor="middle" class="tiny">Headers</text>
  </g>
  <g>
    <rect x="760" y="340" width="90" height="55" rx="6" fill="#334155" stroke="#8b5cf6" stroke-width="1.5"/>
    <text x="805" y="360" text-anchor="middle" class="sublabel" font-size="9">HTTP Backend</text>
    <text x="805" y="375" text-anchor="middle" class="tiny">SGLang • vLLM</text>
    <text x="805" y="387" text-anchor="middle" class="tiny">TensorRT-LLM</text>
  </g>
  <!-- HTTP arrows -->
  <path d="M470 355 L490 350" stroke="#475569" stroke-width="1.5" fill="none"/>
  <path d="M470 375 L490 392" stroke="#475569" stroke-width="1.5" fill="none"/>
  <path d="M570 350 L590 367" stroke="#475569" stroke-width="1.5" fill="none"/>
  <path d="M570 392 L590 375" stroke="#475569" stroke-width="1.5" fill="none"/>
  <path d="M655 367 L675 350" stroke="#475569" stroke-width="1.5" fill="none"/>
  <path d="M655 375 L675 392" stroke="#475569" stroke-width="1.5" fill="none"/>
  <path d="M740 367 L760 367" stroke="#475569" stroke-width="1.5" fill="none"/>

  <!-- ==================== 3RD PARTY PATH ==================== -->
  <text x="600" y="455" text-anchor="middle" class="section-label">3rd Party Path • External Providers</text>
  <rect x="385" y="465" width="530" height="115" rx="10" fill="#1e293b" stroke="#ef4444" stroke-width="1.5"/>

  <g>
    <rect x="400" y="490" width="70" height="45" rx="6" fill="#334155" stroke="#ef4444" stroke-width="1"/>
    <text x="435" y="510" text-anchor="middle" class="sublabel" font-size="9">3rd Party</text>
    <text x="435" y="523" text-anchor="middle" class="small">Router</text>
  </g>
  <g>
    <rect x="490" y="490" width="80" height="45" rx="6" fill="#334155" stroke="#10b981" stroke-width="1"/>
    <text x="530" y="510" text-anchor="middle" class="sublabel" font-size="9">Model</text>
    <text x="530" y="523" text-anchor="middle" class="small">Discovery</text>
  </g>
  <g>
    <rect x="490" y="545" width="80" height="25" rx="6" fill="#334155" stroke="#64748b" stroke-width="1"/>
    <text x="530" y="562" text-anchor="middle" class="tiny">/v1/models</text>
  </g>
  <g>
    <rect x="590" y="480" width="305" height="90" rx="6" fill="#334155" stroke="#ef4444" stroke-width="1.5"/>
    <text x="742" y="500" text-anchor="middle" class="sublabel" font-size="10">External Providers</text>
    <text x="630" y="520" text-anchor="middle" class="small">OpenAI</text>
    <text x="710" y="520" text-anchor="middle" class="small">Anthropic</text>
    <text x="790" y="520" text-anchor="middle" class="small">Gemini</text>
    <text x="860" y="520" text-anchor="middle" class="small">xAI</text>
    <text x="630" y="540" text-anchor="middle" class="small">Together</text>
    <text x="710" y="540" text-anchor="middle" class="small">OpenRouter</text>
    <text x="790" y="540" text-anchor="middle" class="small">Bedrock</text>
    <text x="860" y="540" text-anchor="middle" class="small">OCI</text>
    <text x="742" y="560" text-anchor="middle" class="tiny">+ More...</text>
  </g>

  <!-- 3rd Party arrows -->
  <path d="M470 512 L490 512" stroke="#475569" stroke-width="1.5" fill="none"/>
  <path d="M530 535 L530 545" stroke="#475569" stroke-width="1.5" stroke-dasharray="3,2" fill="none"/>
  <path d="M570 512 L590 512" stroke="#475569" stroke-width="1.5" fill="none"/>

  <!-- ==================== RESPONSE PROCESSING ==================== -->
  <text x="1100" y="600" text-anchor="middle" class="section-label">Response Processing</text>
  <rect x="950" y="610" width="300" height="130" rx="10" fill="#1e293b" stroke="#10b981" stroke-width="1.5"/>

  <g>
    <rect x="970" y="635" width="80" height="45" rx="6" fill="#334155" stroke="#10b981" stroke-width="1"/>
    <text x="1010" y="655" text-anchor="middle" class="sublabel" font-size="9">Tool Parser</text>
    <text x="1010" y="670" text-anchor="middle" class="tiny">Extract calls</text>
  </g>
  <g>
    <rect x="1070" y="635" width="80" height="45" rx="6" fill="#334155" stroke="#ec4899" stroke-width="1"/>
    <text x="1110" y="655" text-anchor="middle" class="sublabel" font-size="9">MCP Handler</text>
    <text x="1110" y="670" text-anchor="middle" class="tiny">Execute tools</text>
  </g>
  <g>
    <rect x="1170" y="635" width="70" height="45" rx="6" fill="#334155" stroke="#10b981" stroke-width="1"/>
    <text x="1205" y="655" text-anchor="middle" class="sublabel" font-size="9">Response</text>
    <text x="1205" y="670" text-anchor="middle" class="tiny">Builder</text>
  </g>

  <!-- Response arrows -->
  <path d="M1050 657 L1070 657" stroke="#475569" stroke-width="1.5" fill="none"/>
  <path d="M1150 657 L1170 657" stroke="#475569" stroke-width="1.5" fill="none"/>

  <!-- MCP Loop back arrow to gRPC Router -->
  <path d="M1110 680 L1110 720 L435 720 L435 245" stroke="#ec4899" stroke-width="1.5" stroke-dasharray="5,3" fill="none" marker-end="url(#arrow)"/>
  <text x="770" y="735" text-anchor="middle" class="tiny">MCP loops back to gRPC Router</text>

  <!-- ==================== MAIN FLOW ARROWS ==================== -->
  <!-- Client to API -->
  <path d="M90 330 L110 280" stroke="#64748b" stroke-width="2" fill="none" marker-end="url(#arrow)"/>
  <!-- Client to Middleware -->
  <path d="M90 380 L110 520" stroke="#64748b" stroke-width="2" fill="none" marker-end="url(#arrow)"/>

  <!-- Middleware to Router -->
  <path d="M240 545 L270 400" stroke="#64748b" stroke-width="2" fill="none" marker-end="url(#arrow)"/>

  <!-- Router to paths -->
  <path d="M360 380 L400 222" stroke="#3b82f6" stroke-width="2" fill="none" marker-end="url(#arrowBlue)"/>
  <path d="M360 397 L400 367" stroke="#f59e0b" stroke-width="2" fill="none" marker-end="url(#arrowAmber)"/>
  <path d="M360 415 L400 512" stroke="#ef4444" stroke-width="2" fill="none" marker-end="url(#arrowRed)"/>

  <!-- Paths to Response Processing (gRPC only - HTTP backends handle tools internally) -->
  <path d="M1145 222 L1145 280 L1100 280 L1100 610" stroke="#64748b" stroke-width="1.5" stroke-dasharray="4,2" fill="none"/>


  <!-- ==================== LEGEND ==================== -->
  <rect x="1200" y="70" width="180" height="170" rx="8" fill="#1e293b" stroke="#475569" stroke-width="1"/>
  <text x="1290" y="92" text-anchor="middle" class="group-label">Legend</text>

  <rect x="1215" y="105" width="14" height="14" rx="2" fill="#334155" stroke="#3b82f6" stroke-width="1.5"/>
  <text x="1240" y="116" class="small">Storage/Registry</text>

  <rect x="1215" y="130" width="14" height="14" rx="2" fill="#334155" stroke="#f59e0b" stroke-width="1.5"/>
  <text x="1240" y="141" class="small">Routing/LB</text>

  <rect x="1215" y="155" width="14" height="14" rx="2" fill="#334155" stroke="#10b981" stroke-width="1.5"/>
  <text x="1240" y="166" class="small">Processing</text>

  <rect x="1215" y="180" width="14" height="14" rx="2" fill="#334155" stroke="#8b5cf6" stroke-width="1.5"/>
  <text x="1240" y="191" class="small">Inference Backend</text>

  <rect x="1215" y="205" width="14" height="14" rx="2" fill="#334155" stroke="#ef4444" stroke-width="1.5"/>
  <text x="1240" y="216" class="small">External Services</text>
</svg>
